(this.webpackJsonpeccomerce=this.webpackJsonpeccomerce||[]).push([[0],{139:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),i=a.n(l),c=a(16),o=a(10),m=a(78),s=a(176),u=a(177),d=a(178),p=a(180),E=a(181),g=a(51),h=a(71),b=a.n(h),y=a(171),v=a(13);var f=Object(y.a)(e=>({appBar:{boxShadow:"none",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",[e.breakpoints.up("sm")]:{width:"calc(100% - 0px)",marginLeft:0}},title:{flexGrow:1,alignItems:"center",display:"flex",textDecoration:"none"},image:{marginRight:"10px"},menuButton:{marginRight:e.spacing(2),[e.breakpoints.up("sm")]:{display:"none"}},grow:{flexGrow:1},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(v.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(v.a)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{width:"auto"}},searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:`calc(1em + ${e.spacing(4)}px)`,transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("md")]:{width:"20ch"}}})),k=a(179);var C=e=>{let{totalItems:t}=e;const[a,l]=Object(n.useState)(null),i=f(),h=Object(o.g)(),y=Boolean(a),v=r.a.createElement(m.a,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:y,onClose:()=>l(null)},r.a.createElement(s.a,null,r.a.createElement(u.a,{component:c.b,to:"/cart","aria-label":"Show cart items",color:"inherit"},r.a.createElement(d.a,{badgeContent:t,color:"secondary",overlap:"rectangular"},r.a.createElement(k.a,null))),r.a.createElement("p",null,"Cart")));return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{position:"fixed",className:i.appBar,color:"inherit"},r.a.createElement(E.a,null,r.a.createElement(g.a,{component:c.b,to:"/jerrammissle.github.io",variant:"h6",className:i.title,color:"inherit"},r.a.createElement("img",{src:b.a,alt:"commerce.js",height:"25px",className:i.image})," Commerce.js"),r.a.createElement("div",{className:i.grow}),"/"===h.pathname&&r.a.createElement("div",{className:i.button},r.a.createElement(u.a,{component:c.b,to:"/cart","aria-label":"Show cart items",color:"inherit"},r.a.createElement(d.a,{badgeContent:t,color:"secondary",overlap:"rectangular"},r.a.createElement(k.a,null)))))),v)},j=a(187),x=a(182),w=a(183),O=a(184),S=a(185),N=Object(y.a)(()=>({root:{maxWidth:"100%"},media:{height:400,width:400,paddingTop:"56.25%"},cardActions:{display:"flex",justifyContent:"flex-end"},cardContent:{display:"flex",justifyContent:"space-between"}})),_=a(186);var B=e=>{let{product:t,onAddToCart:a}=e;const n=N();return r.a.createElement(x.a,{className:n.root},r.a.createElement(w.a,{className:n.media,image:t.image.url,title:t.name,children:r.a.createElement(r.a.Fragment,null)}),r.a.createElement(O.a,null,r.a.createElement("div",{className:n.cardContent},r.a.createElement(g.a,{gutterBottom:!0,variant:"h5",component:"h2"},t.name),r.a.createElement(g.a,{gutterBottom:!0,variant:"h5",component:"h2"},"$",t.price.formatted)),r.a.createElement(g.a,{dangerouslySetInnerHTML:{__html:t.description},variant:"body2",color:"textSecondary",component:"p"})),r.a.createElement(S.a,{disableSpacing:!0,className:n.cardActions},r.a.createElement(u.a,{"aria-label":"Add to Cart",onClick:()=>a(t.id,1)},r.a.createElement(_.a,null))))};var T=e=>{let{products:t,onAddToCart:a}=e;const n=N();return t.length?r.a.createElement("main",{className:n.content},r.a.createElement("div",{className:n.toolbar}),r.a.createElement(j.a,{container:!0,justifyContent:"center",spacing:4},t.map(e=>r.a.createElement(j.a,{key:e.id,item:!0,xs:12,sm:6,md:4,lg:3},r.a.createElement(B,{product:e,onAddToCart:a}))))):r.a.createElement("p",null,"Loading...")},F=a(188),R=a(189),q=Object(y.a)(()=>({media:{height:260},cardContent:{display:"flex",justifyContent:"space-between"},cartActions:{justifyContent:"space-between"},buttons:{display:"flex",alignItems:"center"}}));var L=e=>{var t;let{item:a,onUpdateCartQty:n,onRemoveFromCart:l}=e;const i=q(),c=(e,t)=>n(e,t);return r.a.createElement(x.a,{className:"cart-item"},r.a.createElement(w.a,{image:null===(t=a.media)||void 0===t?void 0:t.source,alt:null===a||void 0===a?void 0:a.name,className:i.media,children:r.a.createElement(r.a.Fragment,null)}),r.a.createElement(O.a,{className:i.cardContent},r.a.createElement(g.a,{variant:"h4"},null===a||void 0===a?void 0:a.name),r.a.createElement(g.a,{variant:"h5"},null===a||void 0===a?void 0:a.line_total.formatted_with_symbol)),r.a.createElement(S.a,{className:i.cardActions},r.a.createElement("div",{className:i.buttons},r.a.createElement(F.a,{type:"button",size:"small",onClick:()=>c(a.id,a.quantity-1)},"-"),r.a.createElement(g.a,null,"\xa0",null===a||void 0===a?void 0:a.quantity,"\xa0"),r.a.createElement(F.a,{type:"button",size:"small",onClick:()=>c(a.id,a.quantity+1)},"+")),r.a.createElement(F.a,{variant:"contained",type:"button",color:"secondary",onClick:()=>{return e=a.id,l(e);var e}},"Remove")))},I=Object(y.a)(e=>({toolbar:e.mixins.toolbar,title:{marginTop:"5%"},emptyButton:{minWidth:"150px",[e.breakpoints.down("xs")]:{marginBottom:"5px"},[e.breakpoints.up("xs")]:{marginRight:"20px"}},checkoutButton:{minWidth:"150px"},link:{textDecoration:"none"},cardDetails:{display:"flex",marginTop:"10%",width:"100%",justifyContent:"space-between"}}));var D=e=>{let{cart:t,onUpdateCartQty:a,onRemoveFromCart:n,onEmptyCart:l}=e;const i=I(),o=()=>l();if(!(null===t||void 0===t?void 0:t.line_items))return"Loading";return r.a.createElement(R.a,null,r.a.createElement("div",{className:i.toolbar}),r.a.createElement(g.a,{className:i.title,variant:"h3",gutterBottom:!0},"Your Shopping Cart"),(null===t||void 0===t?void 0:t.line_items.length)?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{container:!0,spacing:3},null===t||void 0===t?void 0:t.line_items.map(e=>r.a.createElement(j.a,{item:!0,xs:12,sm:4,key:e.id},r.a.createElement(L,{item:e,onUpdateCartQty:a,onRemoveFromCart:n})))),r.a.createElement("div",{className:i.cardDetails},r.a.createElement(g.a,{variant:"h4"},"Subtotal: ",null===t||void 0===t?void 0:t.subtotal.formatted_with_symbol),r.a.createElement("div",null,r.a.createElement(F.a,{className:i.emptyButton,size:"large",type:"button",variant:"contained",color:"secondary",onClick:o},"Empty cart"),r.a.createElement(F.a,{className:i.checkoutButton,component:c.b,to:"/checkout",size:"large",type:"button",variant:"contained",color:"primary"},"Checkout")))):r.a.createElement(g.a,{variant:"subtitle1"},"You have no items in your shopping cart,",r.a.createElement(c.b,{className:i.link,to:"/"},"start adding some"),"!"))},z=a(193),A=a(194),W=a(195),P=a(80),H=a(202),Q=a(196),J=a(198),M=a(76);const U=new(a.n(M).a)("pk_56183d9db2ea975078ba9f756b29c5ea6864cf0cd0a5a",!0);var $=a(201),G=a(197),Z=a(39),K=a(199);var V=function(e){let{name:t,label:a,required:n}=e;const{control:l}=Object(Z.d)();return r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(Z.a,{as:K.a,name:t,control:l,label:a,fullWidth:!0,required:n,error:!1}))};var X=e=>{let{checkoutToken:t,test:a}=e;const[l,i]=Object(n.useState)([]),[o,m]=Object(n.useState)(""),[u,d]=Object(n.useState)([]),[p,E]=Object(n.useState)(""),[h,b]=Object(n.useState)([]),[y,v]=Object(n.useState)(""),f=Object(Z.c)();return Object(n.useEffect)(()=>{(async e=>{const{countries:t}=await U.services.localeListShippingCountries(e);i(t),m(Object.keys(t)[0])})(t.id)},[]),Object(n.useEffect)(()=>{o&&(async e=>{const{subdivisions:t}=await U.services.localeListSubdivisions(e);d(t),E(Object.keys(t)[0])})(o)},[o]),Object(n.useEffect)(()=>{p&&async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=await U.checkout.getShippingOptions(e,{country:t,region:a});b(n),v(n[0].id)}(t.id,o,p)},[p]),r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{variant:"h6",gutterBottom:!0},"Shipping address"),r.a.createElement(Z.b,f,r.a.createElement("form",{onSubmit:f.handleSubmit(e=>a({...e,shippingCountry:o,shippingSubdivision:p,shippingOption:y}))},r.a.createElement(j.a,{container:!0,spacing:3},r.a.createElement(V,{required:!0,name:"firstName",label:"First name"}),r.a.createElement(V,{required:!0,name:"lastName",label:"Last name"}),r.a.createElement(V,{required:!0,name:"address1",label:"Address line 1"}),r.a.createElement(V,{required:!0,name:"email",label:"Email"}),r.a.createElement(V,{required:!0,name:"city",label:"City"}),r.a.createElement(V,{required:!0,name:"zip",label:"Zip / Postal code"}),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement($.a,null,"Shipping Country"),r.a.createElement(G.a,{value:o,fullWidth:!0,onChange:e=>m(e.target.value)},Object.entries(l).map(e=>{let[t,a]=e;return{id:t,label:a}}).map(e=>r.a.createElement(s.a,{key:e.id,value:e.id},e.label)))),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement($.a,null,"Shipping Subdivision"),r.a.createElement(G.a,{value:p,fullWidth:!0,onChange:e=>E(e.target.value)},Object.entries(u).map(e=>{let[t,a]=e;return{id:t,label:a}}).map(e=>r.a.createElement(s.a,{key:e.id,value:e.id},e.label)))),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement($.a,null,"Shipping Options"),r.a.createElement(G.a,{value:y,fullWidth:!0,onChange:e=>v(e.target.value)},h.map(e=>({id:e.id,label:`${e.description} - (${e.price.formatted_with_symbol})`})).map(e=>r.a.createElement(s.a,{key:e.id,value:e.id},e.label))))),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(F.a,{component:c.b,variant:"outlined",to:"/cart"},"Back to Cart"),r.a.createElement(F.a,{type:"submit",variant:"contained",color:"primary"},"Next")))))},Y=a(42),ee=a(77),te=a(175),ae=a(140),ne=a(192);var re=e=>{var t,a;let{checkoutToken:n}=e;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{variant:"h6",gutterBottom:!0},"Order summary"),r.a.createElement(te.a,{disablePadding:!0},null===(t=n.live)||void 0===t?void 0:t.line_items.map(e=>r.a.createElement(ae.a,{style:{padding:"10px 0"},key:e.name},r.a.createElement(ne.a,{primary:e.name,secondary:"Quantity: "+e.quantity}),r.a.createElement(g.a,{variant:"body2"},e.line_total.formatted_with_symbol))),r.a.createElement(ae.a,{style:{padding:"10px 0"}},r.a.createElement(ne.a,{primary:"Total"}),r.a.createElement(g.a,{variant:"subtitle1",style:{fontWeight:700}},null===(a=n.live)||void 0===a?void 0:a.subtotal.formatted_with_symbol))))};const le=Object(ee.a)("pk_test_51OopWoLj6E8bcPt6gc7I0sKfrZRV29i5HZDjXiujKMOOoJqJJOttgBnRtXqhkndSHDyzzVHc3oaHLjldIlD0iH9300k1Gksys7");var ie=e=>{let{checkoutToken:t,nextStep:a,backStep:n,shippingData:l,onCaptureCheckout:i,timeout:c}=e;return r.a.createElement(r.a.Fragment,null,r.a.createElement(re,{checkoutToken:t}),r.a.createElement(z.a,null),r.a.createElement(g.a,{variant:"h6",gutterBottom:!0,style:{margin:"20px 0"}},"Payment method"),r.a.createElement(Y.Elements,{stripe:le},r.a.createElement(Y.ElementsConsumer,null,e=>{var o;let{elements:m,stripe:s}=e;return r.a.createElement("form",{onSubmit:e=>(async(e,n,r)=>{if(e.preventDefault(),!r||!n)return;const o=n.getElement(Y.CardElement),{error:m,paymentMethod:s}=await r.createPaymentMethod({type:"card",card:o});if(m)console.log("[error]",m);else{const e={line_items:t.live.line_items,customer:{firstname:l.firstName,lastname:l.lastName,email:l.email},shipping:{name:"International",street:l.address1,town_city:l.city,county_state:l.shippingSubdivision,postal_zip_code:l.zip,country:l.shippingCountry},fulfillment:{shipping_method:l.shippingOption},payment:{gateway:"stripe",stripe:{payment_method_id:s.id}}};i(t.id,e),c(),a()}})(e,m,s)},r.a.createElement(Y.CardElement,null),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(F.a,{variant:"outlined",onClick:n},"Back"),r.a.createElement(F.a,{type:"submit",variant:"contained",disabled:!s,color:"primary"},"Pay ",null===(o=t.live)||void 0===o?void 0:o.subtotal.formatted_with_symbol)))})))},ce=Object(y.a)(e=>({appBar:{position:"relative"},toolbar:e.mixins.toolbar,layout:{marginTop:"5%",width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2),[e.breakpoints.up(600+2*e.spacing(2))]:{width:600,marginLeft:"auto",marginRight:"auto"}},paper:{marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2),[e.breakpoints.down("xs")]:{width:"100%",marginTop:60},[e.breakpoints.up(600+2*e.spacing(3))]:{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}},stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},divider:{margin:"20px 0"},spinner:{display:"flex",justifyContent:"center",alignItems:"center"}}));const oe=["Shipping address","Payment details"];var me=e=>{let{cart:t,onCaptureCheckout:a,order:l,error:i}=e;const[m,s]=Object(n.useState)(null),[u,d]=Object(n.useState)(0),[p,E]=Object(n.useState)({}),[h,b]=Object(n.useState)(!1),y=ce(),v=Object(o.f)(),f=()=>d(e=>e+1),k=()=>d(e=>e-1);Object(n.useEffect)(()=>{if(t.id){(async()=>{try{const e=await U.checkout.generateToken(t.id,{type:"cart"});s(e)}catch{u!==oe.length&&v.push("/")}})()}},[t]);const C=e=>{E(e),f()},j=()=>{setTimeout(()=>{b(!0)},3e3)};let x=()=>l.customer?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(g.a,{variant:"h5"},"Thank you for your purchase, ",l.customer.firstname," ",l.customer.lastname,"!"),r.a.createElement(z.a,{className:y.divider}),r.a.createElement(g.a,{variant:"subtitle2"},"Order ref: ",l.customer_reference)),r.a.createElement("br",null),r.a.createElement(F.a,{component:c.b,variant:"outlined",type:"button",to:"/"},"Back to home")):h?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(g.a,{variant:"h5"},"Thank you for your purchase"),r.a.createElement(z.a,{className:y.divider})),r.a.createElement("br",null),r.a.createElement(F.a,{component:c.b,variant:"outlined",type:"button",to:"/"},"Back to home")):r.a.createElement("div",{className:y.spinner},r.a.createElement(A.a,null));i&&(x=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{variant:"h5"},"Error: ",i),r.a.createElement("br",null),r.a.createElement(F.a,{component:c.b,variant:"outlined",type:"button",to:"/"},"Back to home")));const w=()=>0===u?r.a.createElement(X,{checkoutToken:m,nextStep:f,setShippingData:E,test:C}):r.a.createElement(ie,{checkoutToken:m,nextStep:f,backStep:k,shippingData:p,onCaptureCheckout:a,timeout:j});return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,null),r.a.createElement("div",{className:y.toolbar}),r.a.createElement("main",{className:y.layout},r.a.createElement(P.a,{className:y.paper},r.a.createElement(g.a,{variant:"h4",align:"center"},"Checkout"),r.a.createElement(H.a,{activeStep:u,className:y.stepper},oe.map(e=>r.a.createElement(Q.a,{key:e},r.a.createElement(J.a,null,e)))),u===oe.length?r.a.createElement(x,null):m&&r.a.createElement(w,null))))};var se=()=>{const[e,t]=r.a.useState(!1),[a,l]=Object(n.useState)([]),[i,m]=Object(n.useState)({}),[s,u]=Object(n.useState)({}),[d,p]=Object(n.useState)("");Object(n.useEffect)(()=>{(async()=>{const{data:e}=await U.products.list();console.log(e),l(e)})(),(async()=>{m(await U.cart.retrieve()),console.log(await U.cart.retrieve())})()},[]);return r.a.createElement(c.a,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(W.a,null),r.a.createElement(C,{totalItems:null===i||void 0===i?void 0:i.total_items,handleDrawerToggle:()=>t(!e)}),r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/jerrammissle.github.io"},r.a.createElement(T,{products:a,onAddToCart:async(e,t)=>{const a=await U.cart.add(e,t);m(a.cart),console.log(e),console.log(t)},handleUpdateCartQty:!0})),r.a.createElement(o.a,{exact:!0,path:"/cart"},r.a.createElement(D,{cart:i,onUpdateCartQty:async(e,t)=>{const a=await U.cart.update(e,{quantity:t});m(a.cart)},onRemoveFromCart:async e=>{const t=await U.cart.remove(e);m(t.cart)},onEmptyCart:async()=>{const e=await U.cart.empty();m(e.cart)}})),r.a.createElement(o.a,{path:"/checkout",exact:!0},r.a.createElement(me,{cart:i,order:s,onCaptureCheckout:async(e,t)=>{try{const a=await U.checkout.capture(e,t);u(a),(async()=>{const e=await U.cart.refresh();m(e)})()}catch(a){p(a.data.error.message)}},error:d})))))};i.a.render(r.a.createElement(se,null),document.getElementById("root"))},71:function(e,t,a){e.exports=a.p+"static/media/commerce.422fec10.png"},91:function(e,t,a){e.exports=a(139)}},[[91,1,2]]]);
//# sourceMappingURL=main.21784db8.chunk.js.map